{% extends 'base_home.html'%}
{% block title %}Actualizar contraseña{% endblock %}

{% load static %}

{% block extra_head %} 
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
<meta name="description" content="bootstrap admin template">
<meta name="author" content="">

<!-- Stylesheets -->
<link rel="stylesheet" href="{% static 'unal/global/css/bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'unal/global/css/bootstrap-extend.min.css' %}">
<link rel="stylesheet" href="{% static 'unal/assets/css/site.min.css' %}">

<!-- Plugins -->
<link rel="stylesheet" href="{% static 'unal/global/vendor/animsition/animsition.css' %}">
<link rel="stylesheet" href="{% static 'unal/global/vendor/dropify/dropify.min.css' %}">
<!-- Fonts -->
<link rel="stylesheet" href="{% static 'unal/global/fonts/web-icons/web-icons.min.css' %}">
<link rel="stylesheet" href="{% static 'unal/global/fonts/brand-icons/brand-icons.min.css' %}">
<link rel='stylesheet' href='http://fonts.googleapis.com/css?family=Roboto:300,400,500,300italic'>

<!-- Scripts -->
<script src="{% static 'unal/global/vendor/breakpoints/breakpoints.js' %}"></script>
<script>
  Breakpoints();
</script>
{% endblock %}

{% block class_doby %}class="animsition app-contacts page-aside-left"{% endblock %}

{% block content %}

<nav class="site-navbar navbar navbar-default navbar-fixed-top navbar-mega" role="navigation">

  {% include "header.html" %}

  <div class="navbar-container container-fluid">
    <!-- Navbar Collapse -->
    {% include "navbar.html" %}
    <!-- End Navbar Collapse -->

    <!-- Site Navbar Seach -->
    <div class="collapse navbar-search-overlap" id="site-navbar-search">
      <form role="search">
        <div class="form-group">
          <div class="input-search">
            <i class="input-search-icon wb-search" aria-hidden="true"></i>
            <input type="text" class="form-control" name="site-search" placeholder="Search...">
            <button type="button" class="input-search-close icon wb-close" data-target="#site-navbar-search"
              data-toggle="collapse" aria-label="Close"></button>
          </div>
        </div>
      </form>
    </div>
    <!-- End Site Navbar Seach -->
  </div>
</nav>
{% include "menu.html" %}

<div class="page bg-white">
    <div class="page-main">

        <!--Header-->
        <div class="page-header">
            <h1 class="page-title">Actualizar contraseña</h1>
            <div class="page-header-actions"> 
                <button title="Voler a lista de programas" class="btn btn-outline-primary btn-sm" type="button"
                    onclick="location.href='{% url 'student_list' %}'">
                    <i class="icon wb-arrow-left" aria-hidden="true"></i>Volver
                </button>
            </div>
        </div>

        <!--Body-->
        <div class="page-content">
            <div class="row col-12">
                <div class="col-8">
                    <!--Form-->
                    <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="id_old_password">Contraseña antigua:</label>
                            <input type="password" name="old_password" class="form-control" id="id_old_password" 
                                placeholder="Contraseña antigua">
                        </div>
                        <div class="form-group">
                            <small id="passwordHelpBlock" class="form-text text-muted">
                                <ul>
                                    <li>Tu contraseña no puede ser similar a tu información personal</li>
                                    <li>Tu contraseña debe contener al menos 8 caracterés, incluyendo letras y números</li>
                                    <li>Tu contraseña no puede ser una contraseña similar a una anterior</li>
                                </ul>
                            </small>
                        </div>

                        <div class="form-group">
                            <label for="id_new_password1">Nueva contraseña:</label>
                            <input type="password" name="new_password1" class="form-control" id="id_new_password1" 
                                placeholder="Nueva contraseña">
                        </div>

                        <div class="form-group">
                            <label for="id_new_password2">Confirma la nueva contraseña:</label>
                            <input type="password" name="new_password2" class="form-control" id="id_new_password2" 
                                placeholder="Confirma la nueva conrtaseña">
                        </div>
                        <div class="text-center">
                            <button class="btn btn-success">Actualizar contraseña</button>
                        </div>
                        {{form.errors}}
                    {% comment %} {{form.as_p}} {% endcomment %}
                    {% comment %} <div class="alert alert-danger">
                        <strong>{{form.errors}}</strong>
                    </div> {% endcomment %}
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

{% include "footer.html" %}
<!-- Core  -->
<script src="{% static 'unal/global/vendor/babel-external-helpers/babel-external-helpers.js' %}"></script>
<script src="{% static 'unal/global/vendor/jquery/jquery.js' %}"></script>
<script src="{% static 'unal/global/vendor/popper-js/umd/popper.min.js' %}"></script>
<script src="{% static 'unal/global/vendor/bootstrap/bootstrap.js' %}"></script>
<script src="{% static 'unal/global/vendor/animsition/animsition.js' %}"></script>
<script src="{% static 'unal/global/vendor/asscrollbar/jquery-asScrollbar.js' %}"></script>
<script src="{% static 'unal/global/vendor/asscrollable/jquery-asScrollable.js' %}"></script>
<script src="{% static 'unal/global/vendor/ashoverscroll/jquery-asHoverScroll.js' %}"></script>

<!-- Scripts -->
<script src="{% static 'unal/global/js/Component.js' %}"></script>
<script src="{% static 'unal/global/js/Plugin.js' %}"></script>
<script src="{% static 'unal/global/js/Base.js' %}"></script>
<script src="{% static 'unal/global/js/Config.js' %}"></script>

<script src="{% static 'unal/assets/js/Section/Menubar.js' %}"></script>
<script src="{% static 'unal/assets/js/Section/GridMenu.js' %}"></script>
<script src="{% static 'unal/assets/js/Section/Sidebar.js' %}"></script>
<script src="{% static 'unal/assets/js/Plugin/menu.js' %}"></script>

<!-- Page -->
<script src="{% static 'unal/assets/js/Site.js' %}"></script>
<script src="{% static 'unal/global/js/Plugin/slidepanel.js' %}"></script>
<script src="{% static 'unal/global/js/Plugin/dropify.js' %}"></script>

<script src="{% static 'unal/assets/js/BaseApp.js' %}"></script>
<script src="{% static 'unal/assets/js/App/Contacts.js' %}"></script>

<script src="{% static 'unal/assets/examples/js/apps/contacts.js' %}"></script>

<script>
// código de: https://jsfiddle.net/emkey08/tvx5e7q3, tomado de https://stackoverflow.com/questions/891696/jquery-what-is-the-best-way-to-restrict-number-only-input-for-textboxes-all?answertab=votes#tab-top
(function($) {
  $.fn.inputFilter = function(inputFilter) {
    return this.on("input keydown keyup mousedown mouseup select contextmenu drop", function() {
      if (inputFilter(this.value)) {
        this.oldValue = this.value;
        this.oldSelectionStart = this.selectionStart;
        this.oldSelectionEnd = this.selectionEnd;
      } else if (this.hasOwnProperty("oldValue")) {
        this.value = this.oldValue;
        this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
      }
    });
  };
}(jQuery));


$(this.document).ready(function() {
    var max = 100 - "{{ actual_adavance }}"; // Porcentaje máximo del avance
    $("#id_percentage").inputFilter(function(value) {
        return /^\d*$/.test(value) && (value === "" || parseInt(value) <= max); 
    });
});

$("#id_percentage").bind('keyup mouseup', function () {
    progress_bar = $('#new_progress');
    progress_bar.css({width: this.value+"%"});
    progress_bar.empty();
    progress_bar.append(this.value+'%');
});
</script>
{% endblock content %}